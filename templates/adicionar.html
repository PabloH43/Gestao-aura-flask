<style>
    body {
        font-family: Arial, sans-serif;
        padding: 10px;
    }

    form {
        display: flex;
        flex-direction: column;
    }

    label {
        margin-top: 10px;
        font-weight: bold;
        font-size: 16px;
    }

    input, select, button {
        padding: 10px;
        font-size: 16px;
        border-radius: 8px;
        border: 1px solid #ccc;
        margin-top: 5px;
    }

    button {
        background-color: #4CAF50;
        color: white;
        margin-top: 20px;
        cursor: pointer;
    }

    button:hover {
        background-color: #45a049;
    }

    .hidden {
        display: none;
    }

</style>

<h2>üìù Adicionar Transa√ß√£o</h2>

<form method="post">

    <label>Tipo:</label>
    <select name="tipo" id="tipo" required>
        <option value="Entrada">üí∞ Entrada</option>
        <option value="Sa√≠da">üí∏ Sa√≠da</option>
    </select>

    <label>Entidade:</label>
    <select name="entidade" id="entidade" required onchange="atualizarEntidades()">
        {% for e in entidades %}
        <option value="{{ e }}">{{ e }}</option>
        {% endfor %}
        <option value="__novo__">‚ûï Nova Entidade</option>
    </select>

    <div id="nova_entidade_div" class="hidden">
        <input type="text" name="nova_entidade" placeholder="Digite nova entidade">
    </div>

    <label>Categoria:</label>
    <select name="categoria" id="categoria" onchange="atualizarCategoria()">
        {% for c in categorias %}
        <option value="{{ c }}">{{ c }}</option>
        {% endfor %}
        <option value="__nova__">‚ûï Nova Categoria</option>
    </select>

    <div id="nova_categoria_div" class="hidden">
        <input type="text" name="nova_categoria" placeholder="Digite nova categoria">
    </div>

    <label>Descri√ß√£o:</label>
    <input type="text" name="descricao" placeholder="Ex: Venda para Paulo">

    <label>Valor (R$):</label>
    <input type="number" step="0.01" name="valor" placeholder="Ex: 150.00" required>

    <label>Data:</label>
    <input type="date" name="data" required>

    <label>Status:</label>
    <select name="status" required>
        <option value="Pendente">‚è≥ Pendente</option>
        <option value="Pago">‚úÖ Pago</option>
    </select>

    <button type="submit">üíæ Salvar Transa√ß√£o</button>

</form>

<script>
function atualizarEntidades() {
    let select = document.getElementById("entidade");
    let novaDiv = document.getElementById("nova_entidade_div");
    novaDiv.className = select.value === "__novo__" ? "" : "hidden";
}

function atualizarCategoria() {
    let select = document.getElementById("categoria");
    let novaDiv = document.getElementById("nova_categoria_div");
    novaDiv.className = select.value === "__nova__" ? "" : "hidden";
}
</script>
